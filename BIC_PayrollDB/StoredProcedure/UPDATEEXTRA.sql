IF (OBJECT_ID('UPDATEEXTRA') IS NOT NULL) 
BEGIN 
DROP PROCEDURE UPDATEEXTRA
END
GO
CREATE PROC [dbo].[UPDATEEXTRA]
( 
@REFRESH CHAR(1) = ''
)

AS 

BEGIN

DECLARE @A INT

DECLARE UPDATEUS CURSOR LOCAL FOR 

SELECT USERID FROM USERMAST 

OPEN UPDATEUS

FETCH NEXT FROM UPDATEUS INTO @A

WHILE @@FETCH_STATUS=0
							
							
BEGIN

UPDATE USERMAST SET EXTRA =  ( SELECT '#' +  CONVERT(VARCHAR(max), CRYPT_GEN_RANDOM(3), 2)  ) WHERE USERID = @A


FETCH NEXT FROM UPDATEUS INTO @A
END
CLOSE UPDATEUS
DEALLOCATE UPDATEUS 

END 



GO
